<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Model-Free Difference-in-Differences Estimation • didnp</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Model-Free Difference-in-Differences Estimation">
<meta name="description" content="A package for computing both heterogenous and average treatment effects for the treated in a model-free differences-in-differences framework.">
<meta property="og:description" content="A package for computing both heterogenous and average treatment effects for the treated in a model-free differences-in-differences framework.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">didnp</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">All functions</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">News/Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="a-model-free-differences-in-differences-framework">A model-free differences-in-differences framework<a class="anchor" aria-label="anchor" href="#a-model-free-differences-in-differences-framework"></a>
</h1></div>
<!-- badges: start -->


<!-- badges: end -->
<!-- README.md is generated from README.Rmd. Please edit that file -->
<p>The <strong>didnp</strong> package contains tools for computing average treatment effect parameters in a Difference-in-Differences setup without specifying a model.</p>
<div class="section level2">
<h2 id="the-framework">The framework<a class="anchor" aria-label="anchor" href="#the-framework"></a>
</h2>
<p>The <strong>didnp</strong> package implements the framework developed in</p>
<p>Daniel J. Henderson and Stefan Sperlich (2023), “A Complete Framework for Model-Free Difference-in-Differences Estimation”, Foundations and Trends® in Econometrics: Vol. 12: No. 3, pp 232-323. <a href="http://dx.doi.org/10.1561/0800000046" class="external-link uri">http://dx.doi.org/10.1561/0800000046</a></p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>The package <strong>didnp</strong> can be install from CRAN by typing:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"didnp"</span>, dependencies <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>or get the latest version from github by typing:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span> <span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://devtools.r-lib.org/" class="external-link">"devtools"</a></span><span class="op">)</span> <span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"OlegBadunenko/didnp"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="illustration">Illustration<a class="anchor" aria-label="anchor" href="#illustration"></a>
</h2>
<blockquote>
<p>The subset of the data from <a href="https://ipums.org" class="external-link">IPUMS</a> is used to illustrate the functionality of the package. The data are available in the package and can be loaded by</p>
</blockquote>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://olegbadunenko.github.io/didnp/">didnp</a></span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="co">#R&gt;  ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──</span></span>
<span><span class="co">#R&gt;  ✔ dplyr     1.1.4     ✔ readr     2.1.5</span></span>
<span><span class="co">#R&gt;  ✔ forcats   1.0.0     ✔ stringr   1.5.1</span></span>
<span><span class="co">#R&gt;  ✔ ggplot2   3.5.1     ✔ tibble    3.2.1</span></span>
<span><span class="co">#R&gt;  ✔ lubridate 1.9.4     ✔ tidyr     1.3.1</span></span>
<span><span class="co">#R&gt;  ✔ purrr     1.0.2     </span></span>
<span><span class="co">#R&gt;  ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──</span></span>
<span><span class="co">#R&gt;  ✖ dplyr::filter() masks stats::filter()</span></span>
<span><span class="co">#R&gt;  ✖ dplyr::lag()    masks stats::lag()</span></span>
<span><span class="co">#R&gt;  ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">Unempl</span>, package <span class="op">=</span> <span class="st">"didnp"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">Unempl</span><span class="op">)</span></span>
<span><span class="co">#R&gt;    FT YEAR    UNEMP SEX STATEFIP SCHOOL AGE YRIMMIG EDUC AFTER ELIGIBLE</span></span>
<span><span class="co">#R&gt;  1  1 2008 5.883333   2        1      1  23    2000    6     0        1</span></span>
<span><span class="co">#R&gt;  2  1 2008 5.883333   1        1      1  27    1993    6     0        0</span></span>
<span><span class="co">#R&gt;  3  1 2008 5.883333   2        1      1  30    1980    6     0        0</span></span>
<span><span class="co">#R&gt;  4  1 2008 5.883333   1        1      1  27    1994    6     0        0</span></span>
<span><span class="co">#R&gt;  5  1 2008 5.883333   2        1      1  25    1991    6     0        1</span></span>
<span><span class="co">#R&gt;  6  1 2008 6.475000   2        2      1  24    1987    7     0        1</span></span></code></pre></div>
<p>The description of the dataset can be found by typing</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="op">?</span><span class="va">Unempl</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">Unempl</span><span class="op">$</span><span class="va">age</span><span class="op">)</span></span></code></pre></div>
<p>The variable ‘ELIGIBLE’ is actually treated. Only those who were eligible before 2012 can be treated. In 2013 and beyond, eligible individuals are treated. Conversely, in 2011 and earlier, they are eligible to be treated starting from 2013.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">Unempl</span><span class="op">$</span><span class="va">YEAR</span>, <span class="va">Unempl</span><span class="op">$</span><span class="va">ELIGIBLE</span><span class="op">)</span></span>
<span><span class="co">#R&gt;        </span></span>
<span><span class="co">#R&gt;            0    1</span></span>
<span><span class="co">#R&gt;    2008  848 1506</span></span>
<span><span class="co">#R&gt;    2009  816 1563</span></span>
<span><span class="co">#R&gt;    2010  851 1593</span></span>
<span><span class="co">#R&gt;    2011  779 1571</span></span>
<span><span class="co">#R&gt;    2013  747 1377</span></span>
<span><span class="co">#R&gt;    2014  707 1349</span></span>
<span><span class="co">#R&gt;    2015  623 1227</span></span>
<span><span class="co">#R&gt;    2016  629 1196</span></span></code></pre></div>
<p>For convenience, a data said with a smaller number of variables is created</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">Unempl</span><span class="op">$</span><span class="va">FT</span><span class="op">)</span>,</span>
<span>  year <span class="op">=</span> <span class="va">Unempl</span><span class="op">$</span><span class="va">YEAR</span>,</span>
<span>  unemp <span class="op">=</span> <span class="va">Unempl</span><span class="op">$</span><span class="va">UNEMP</span>,</span>
<span>  sex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">Unempl</span><span class="op">$</span><span class="va">SEX</span><span class="op">)</span>,</span>
<span>  age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">ordered</a></span><span class="op">(</span><span class="va">Unempl</span><span class="op">$</span><span class="va">AGE</span><span class="op">)</span>,</span>
<span>  yrimmig <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">ordered</a></span><span class="op">(</span><span class="va">Unempl</span><span class="op">$</span><span class="va">YRIMMIG</span><span class="op">)</span>,</span>
<span>  educ <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">ordered</a></span><span class="op">(</span><span class="va">Unempl</span><span class="op">$</span><span class="va">EDUC</span><span class="op">)</span>,</span>
<span>  treatment_period <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">Unempl</span><span class="op">$</span><span class="va">AFTER</span><span class="op">)</span>,</span>
<span>  treated <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">Unempl</span><span class="op">$</span><span class="va">ELIGIBLE</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>There is a gap in the ‘year’</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">d2</span><span class="op">$</span><span class="va">year</span><span class="op">)</span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  2008 2009 2010 2011 2013 2014 2015 2016 </span></span>
<span><span class="co">#R&gt;  2354 2379 2444 2350 2124 2056 1850 1825</span></span></code></pre></div>
<p>Year 2012 is missing. This is when the treatment occurred. A variable ‘t’ is generated, where</p>
<table class="table">
<thead><tr class="header">
<th align="left">Year</th>
<th align="right">t</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">2008</td>
<td align="right">-3</td>
</tr>
<tr class="even">
<td align="left">2009</td>
<td align="right">-2</td>
</tr>
<tr class="odd">
<td align="left">2010</td>
<td align="right">-1</td>
</tr>
<tr class="even">
<td align="left">2011</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">2013</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">2014</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">2015</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">2016</td>
<td align="right">4</td>
</tr>
</tbody>
</table>
<p>An artificial variable ‘period’ that does not have a gap is generated, where</p>
<table class="table">
<thead><tr class="header">
<th align="left">Year</th>
<th align="right">period</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">2008</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">2009</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">2010</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">2011</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="left">2013</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="left">2014</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="left">2015</td>
<td align="right">7</td>
</tr>
<tr class="even">
<td align="left">2016</td>
<td align="right">8</td>
</tr>
</tbody>
</table>
<p>To make the same more homogeneous and smaller for illustrative purposes, the subsample of the data with the following conditions is created:</p>
<ol style="list-style-type: decimal">
<li>yrimmig &gt;= 1982 &amp; yrimmig &lt;= 1994</li>
<li>educ &gt;= 6 &amp; educ &lt;= 11</li>
</ol>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">year_min</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">Unempl</span><span class="op">$</span><span class="va">YEAR</span><span class="op">)</span></span>
<span></span>
<span><span class="va">d0</span> <span class="op">&lt;-</span> <span class="va">d2</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">yrimmig</span> <span class="op">&gt;=</span> <span class="fl">1982</span> <span class="op">&amp;</span> <span class="va">yrimmig</span> <span class="op">&lt;=</span> <span class="fl">1994</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">educ</span> <span class="op">&gt;=</span> <span class="fl">6</span> <span class="op">&amp;</span> <span class="va">educ</span> <span class="op">&lt;=</span> <span class="fl">11</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    yrimmig <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/droplevels.html" class="external-link">droplevels</a></span><span class="op">(</span><span class="va">yrimmig</span><span class="op">)</span>,</span>
<span>    educ <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/droplevels.html" class="external-link">droplevels</a></span><span class="op">(</span><span class="va">educ</span><span class="op">)</span>,</span>
<span>    age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/droplevels.html" class="external-link">droplevels</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>period <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="va">year</span> <span class="op">&lt;</span> <span class="fl">2012</span>,</span>
<span>      <span class="va">year</span> <span class="op">-</span> <span class="va">year_min</span> <span class="op">+</span> <span class="fl">1</span>,</span>
<span>      <span class="va">year</span> <span class="op">-</span> <span class="va">year_min</span><span class="op">)</span>,</span>
<span>      t <span class="op">=</span> <span class="va">period</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">period</span><span class="op">[</span><span class="va">treatment_period</span> <span class="op">==</span> <span class="fl">1</span><span class="op">]</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">d0</span><span class="op">$</span><span class="va">period</span><span class="op">)</span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;     1    2    3    4    5    6    7    8 </span></span>
<span><span class="co">#R&gt;  1539 1589 1628 1624 1453 1364 1184 1217</span></span></code></pre></div>
<blockquote>
<p>Here is a basic description of the data</p>
</blockquote>
<p>Treated over time</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">d0</span><span class="op">$</span><span class="va">year</span>, <span class="va">d0</span><span class="op">$</span><span class="va">treated</span><span class="op">)</span></span>
<span><span class="co">#R&gt;        </span></span>
<span><span class="co">#R&gt;            0    1</span></span>
<span><span class="co">#R&gt;    2008  655  884</span></span>
<span><span class="co">#R&gt;    2009  620  969</span></span>
<span><span class="co">#R&gt;    2010  641  987</span></span>
<span><span class="co">#R&gt;    2011  612 1012</span></span>
<span><span class="co">#R&gt;    2013  587  866</span></span>
<span><span class="co">#R&gt;    2014  540  824</span></span>
<span><span class="co">#R&gt;    2015  464  720</span></span>
<span><span class="co">#R&gt;    2016  489  728</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">d0</span><span class="op">$</span><span class="va">t</span>, <span class="va">d0</span><span class="op">$</span><span class="va">treated</span><span class="op">)</span></span>
<span><span class="co">#R&gt;      </span></span>
<span><span class="co">#R&gt;          0    1</span></span>
<span><span class="co">#R&gt;    -3  655  884</span></span>
<span><span class="co">#R&gt;    -2  620  969</span></span>
<span><span class="co">#R&gt;    -1  641  987</span></span>
<span><span class="co">#R&gt;    0   612 1012</span></span>
<span><span class="co">#R&gt;    1   587  866</span></span>
<span><span class="co">#R&gt;    2   540  824</span></span>
<span><span class="co">#R&gt;    3   464  720</span></span>
<span><span class="co">#R&gt;    4   489  728</span></span></code></pre></div>
<p>Recoded variable ‘t’</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">d0</span><span class="op">$</span><span class="va">t</span>, <span class="va">d0</span><span class="op">$</span><span class="va">year</span><span class="op">)</span></span>
<span><span class="co">#R&gt;      </span></span>
<span><span class="co">#R&gt;       2008 2009 2010 2011 2013 2014 2015 2016</span></span>
<span><span class="co">#R&gt;    -3 1539    0    0    0    0    0    0    0</span></span>
<span><span class="co">#R&gt;    -2    0 1589    0    0    0    0    0    0</span></span>
<span><span class="co">#R&gt;    -1    0    0 1628    0    0    0    0    0</span></span>
<span><span class="co">#R&gt;    0     0    0    0 1624    0    0    0    0</span></span>
<span><span class="co">#R&gt;    1     0    0    0    0 1453    0    0    0</span></span>
<span><span class="co">#R&gt;    2     0    0    0    0    0 1364    0    0</span></span>
<span><span class="co">#R&gt;    3     0    0    0    0    0    0 1184    0</span></span>
<span><span class="co">#R&gt;    4     0    0    0    0    0    0    0 1217</span></span></code></pre></div>
<p>Treated by the year of immigration</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">d0</span><span class="op">$</span><span class="va">yrimmig</span>, <span class="va">d0</span><span class="op">$</span><span class="va">treated</span><span class="op">)</span></span>
<span><span class="co">#R&gt;        </span></span>
<span><span class="co">#R&gt;            0    1</span></span>
<span><span class="co">#R&gt;    1982  165  126</span></span>
<span><span class="co">#R&gt;    1983  158  196</span></span>
<span><span class="co">#R&gt;    1984  169  303</span></span>
<span><span class="co">#R&gt;    1985  297  448</span></span>
<span><span class="co">#R&gt;    1986  252  482</span></span>
<span><span class="co">#R&gt;    1987  209  393</span></span>
<span><span class="co">#R&gt;    1988  298  587</span></span>
<span><span class="co">#R&gt;    1989  509  876</span></span>
<span><span class="co">#R&gt;    1990  755 1019</span></span>
<span><span class="co">#R&gt;    1991  434  621</span></span>
<span><span class="co">#R&gt;    1992  561  649</span></span>
<span><span class="co">#R&gt;    1993  424  623</span></span>
<span><span class="co">#R&gt;    1994  377  667</span></span></code></pre></div>
<p>Treated by education</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">d0</span><span class="op">$</span><span class="va">educ</span>, <span class="va">d0</span><span class="op">$</span><span class="va">treated</span><span class="op">)</span></span>
<span><span class="co">#R&gt;      </span></span>
<span><span class="co">#R&gt;          0    1</span></span>
<span><span class="co">#R&gt;    6  3436 4658</span></span>
<span><span class="co">#R&gt;    7   703 1352</span></span>
<span><span class="co">#R&gt;    8   228  489</span></span>
<span><span class="co">#R&gt;    10  196  437</span></span>
<span><span class="co">#R&gt;    11   45   54</span></span></code></pre></div>
<p>Treated by age</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">d0</span><span class="op">$</span><span class="va">treated</span>, <span class="va">d0</span><span class="op">$</span><span class="va">age</span><span class="op">)</span></span>
<span><span class="co">#R&gt;     </span></span>
<span><span class="co">#R&gt;       22  23  24  25  26  27  28  29  30  31  32  33  34  35  36  37  38  39</span></span>
<span><span class="co">#R&gt;    0   0   0   0   0   0  72 233 365 609 502 474 457 408 451 470 300 200  67</span></span>
<span><span class="co">#R&gt;    1  86 281 514 699 753 737 761 681 733 615 506 350 214  60   0   0   0   0</span></span></code></pre></div>
<p>Although this can be done on the fly, the subsample can be prepared beforehand:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get the subsample</span></span>
<span><span class="va">d0</span> <span class="op">&lt;-</span> <span class="va">d0</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>smpl <span class="op">=</span> <span class="va">year</span> <span class="op">&gt;=</span> <span class="fl">2010</span> <span class="op">&amp;</span> <span class="va">year</span> <span class="op">&lt;=</span> <span class="fl">2014</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">d0</span><span class="op">$</span><span class="va">smpl</span><span class="op">)</span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  FALSE  TRUE </span></span>
<span><span class="co">#R&gt;   5529  6069</span></span></code></pre></div>
<blockquote>
<p>Define the formula that we will use:</p>
</blockquote>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">form1</span> <span class="op">&lt;-</span> <span class="va">y</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">educ</span> <span class="op">+</span> <span class="va">sex</span> <span class="op">+</span> <span class="va">unemp</span> <span class="op">|</span> <span class="va">period</span> <span class="op">|</span> <span class="va">treated</span> <span class="op">|</span> <span class="va">treatment_period</span></span></code></pre></div>
<p>To obtain standard errors and perform testing in this <em>illustration</em>,</p>
<blockquote>
<p>we will use a few number of bootstrap replicaitons here, but we advise to set <code>boot.num = 399</code> or larger in an application.</p>
</blockquote>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">B</span> <span class="op">&lt;-</span> <span class="fl">9</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="testing">Testing<a class="anchor" aria-label="anchor" href="#testing"></a>
</h2>
<p>To test if there is a violation of the bias stability condition use command <strong>didnptest</strong></p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tym1test</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/didnpbsctest.html">didnpbsctest</a></span><span class="op">(</span></span>
<span>  <span class="va">form1</span>,</span>
<span>  data <span class="op">=</span> <span class="va">d0</span>,</span>
<span>  subset <span class="op">=</span> <span class="va">smpl</span>,</span>
<span>  boot.num <span class="op">=</span> <span class="va">B</span>,</span>
<span>  print.level <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  cores <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#R&gt;  Warning in didnpbsctest.default(outcome = Y, regressors = X, time = time, :</span></span>
<span><span class="co">#R&gt;  Data starts in 3, while the treatment is in 4</span></span>
<span><span class="co">#R&gt;  Number of Observations is  6069 </span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  Number of observations in treated group right after the treatment       (N_ 1, 1) = 866 </span></span>
<span><span class="co">#R&gt;  Number of observations in treated group just before the treatment       (N_ 1, 0) = 1012 </span></span>
<span><span class="co">#R&gt;  Number of observations in treated group one period before the treatment (N_ 1,-1) = 987 </span></span>
<span><span class="co">#R&gt;  Number of observations in control group right after the treatment       (N_ 0, 1) = 587 </span></span>
<span><span class="co">#R&gt;  Number of observations in control group just before the treatment       (N_ 0, 0) = 612 </span></span>
<span><span class="co">#R&gt;  Number of observations in control group one period before the treatment (N_ 0,-1) = 641 </span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  Number of Continuous Regressors            = 1 </span></span>
<span><span class="co">#R&gt;  Number of Unordered Categorical Regressors = 1 </span></span>
<span><span class="co">#R&gt;  Number of Ordered Categorical Regressors   = 2 </span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  Bandwidths are chosen via the plug-in method</span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  Calculating BSC </span></span>
<span><span class="co">#R&gt;  BSC = 0.2248732862</span></span>
<span><span class="co">#R&gt;  Calculating BSC completed in 0 seconds</span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  Bootstrapping the statistic (9 replications)</span></span>
<span><span class="co">#R&gt;  Calculating residuals for the alternative model</span></span>
<span><span class="co">#R&gt;  Calculating residuals for the alternative model completed in 0 seconds</span></span>
<span><span class="co">#R&gt;  Calculating fitted values under the null hypothesis</span></span>
<span><span class="co">#R&gt;  Calculating fitted values under the null hypothesis completed in 0 seconds</span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  The main loop of the bootstrapping started</span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  Bootstrapping will take approximately: 0 seconds</span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;    |                                                                              |=========                                                             |  12%  |                                                                              |==================                                                    |  25%  |                                                                              |==========================                                            |  38%  |                                                                              |===================================                                   |  50%  |                                                                              |============================================                          |  62%  |                                                                              |====================================================                  |  75%  |                                                                              |=============================================================         |  88%  |                                                                              |======================================================================| 100%</span></span>
<span><span class="co">#R&gt;  Bootstrapping the statistic completed in 0 seconds</span></span>
<span><span class="co">#R&gt;   p.value:</span></span>
<span><span class="co">#R&gt;  [1] 0.1</span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  BSC statistic                   = 0.2249 </span></span>
<span><span class="co">#R&gt;  BSC bootstrapped standard error = 0.03174 </span></span>
<span><span class="co">#R&gt;  Bootstrapped p-value            =   0.1</span></span></code></pre></div>
<p><em>Interpretation</em>: We do find evidence against the null hypothesis that the bias stability condition holds. The desired <em>p</em>-value should be much larger than the 0.1 level.</p>
</div>
<div class="section level2">
<h2 id="estimation">Estimation<a class="anchor" aria-label="anchor" href="#estimation"></a>
</h2>
<p>To estimate the average treatment effects, we use the <strong>didnpreg</strong> function. The <strong>didnpreg</strong> function allows using matrices. The manual explains how to use matrix syntax (type <code><a href="reference/didnpreg.html">?didnpreg</a></code>).</p>
<p>To speed up the estimation</p>
<blockquote>
<p>on computers with multiple cores, use multiplrocessing by setting option <code>cores</code>.</p>
</blockquote>
<p>Suppress output by setting <code>print.level = 0</code>. The default value is 1.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># suppress output</span></span>
<span><span class="va">tym1a</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/didnpreg.html">didnpreg</a></span><span class="op">(</span></span>
<span>  <span class="va">form1</span>,</span>
<span>  data <span class="op">=</span> <span class="va">d0</span>,</span>
<span>  subset <span class="op">=</span> <span class="va">smpl</span>,</span>
<span>  bwmethod <span class="op">=</span> <span class="st">"opt"</span>,</span>
<span>  boot.num <span class="op">=</span> <span class="va">B</span>,</span>
<span>  TTx <span class="op">=</span> <span class="st">"TTa"</span>,</span>
<span>  print.level <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  digits <span class="op">=</span> <span class="fl">8</span>,</span>
<span>  cores <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#R&gt;  Warning in didnpreg.default(outcome = Y, regressors = X, time = time, treated =</span></span>
<span><span class="co">#R&gt;  treated, : Data starts in 3, while the treatment is in 4</span></span>
<span><span class="co">#R&gt;  Number of observations = 6069 </span></span>
<span><span class="co">#R&gt;  Number of observations in the year of the treatment and one year after the treatment = 3077 </span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  Number of observations in treated group after  the treatment (N_ 1, 1) = 1690 </span></span>
<span><span class="co">#R&gt;  Number of observations in treated group before the treatment (N_ 1, 0) = 1999 </span></span>
<span><span class="co">#R&gt;  Number of observations in control group after  the treatment (N_ 0, 1) = 1127 </span></span>
<span><span class="co">#R&gt;  Number of observations in control group before the treatment (N_ 0, 0) = 1253 </span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  Number of Continuous Regressors            = 1 </span></span>
<span><span class="co">#R&gt;  Number of Unordered Categorical Regressors = 1 </span></span>
<span><span class="co">#R&gt;  Number of Ordered Categorical Regressors   = 2 </span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  Bandwidths are chosen via the plug-in method</span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;    Regressor       Type    Bandwidth</span></span>
<span><span class="co">#R&gt;  1       age    ordered 9.356700e-05</span></span>
<span><span class="co">#R&gt;  2      educ    ordered 9.049838e-05</span></span>
<span><span class="co">#R&gt;  3       sex     factor 5.909937e-04</span></span>
<span><span class="co">#R&gt;  4     unemp continuous 2.397334e-01</span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  Calculating ATET: TTa</span></span>
<span><span class="co">#R&gt;  TTa = 0.076863646, N (TTa; treated in the first period or N_ 1, 1) = 1690</span></span>
<span><span class="co">#R&gt;  Calculating ATET completed in 0 seconds</span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  Bootstrapping standard errors (9 replications)</span></span>
<span><span class="co">#R&gt;  Calculating residuals completed</span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  Bootstrapping will take approximately: 0 seconds</span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;    |                                                                              |=========                                                             |  12%  |                                                                              |==================                                                    |  25%  |                                                                              |==========================                                            |  38%  |                                                                              |===================================                                   |  50%  |                                                                              |============================================                          |  62%  |                                                                              |====================================================                  |  75%  |                                                                              |=============================================================         |  88%  |                                                                              |======================================================================| 100%</span></span>
<span><span class="co">#R&gt;  Bootstrapping standard errors completed in 0 seconds</span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  TTa bootstrapped standard error =  0.051570106 </span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  Bootstrapped confidence interval:</span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;                  Coef.        SE  [95% confidence interval]                                                          </span></span>
<span><span class="co">#R&gt;  ATET (TTa) 0.07686365 0.05157011 0.01116557     0.15104066</span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  p-value and confidence interval assuming ATET (TTa) is normally distributed:</span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;                  Coef.        SE       z      P&gt;|z|  [95% confidence interval]                                                                             </span></span>
<span><span class="co">#R&gt;  ATET (TTa) 0.07686365 0.05157011    1.49 0.13610095 -0.02421190    0.17793920</span></span></code></pre></div>
<p><strong>didnpreg</strong> returns a class <strong>didnp</strong> object. This object contains estimates of the average treatment effects and their standard errors. To see these, we can call the <strong>summary</strong> function.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Print the summary of estimation</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">tym1a</span><span class="op">)</span></span>
<span><span class="co">#R&gt;  Number of Observations = 6069 </span></span>
<span><span class="co">#R&gt;  Number of observations in the year of the treatment and one year after the treatment = 6069 </span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  Number of observations in treated group right after the treatment (N_11) = 1690 </span></span>
<span><span class="co">#R&gt;  Number of observations in treated group just before the treatment (N_10) = 1999 </span></span>
<span><span class="co">#R&gt;  Number of observations in control group right after the treatment (N_01) = 1127 </span></span>
<span><span class="co">#R&gt;  Number of observations in control group just before the treatment (N_00) = 1253 </span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  Number of Continuous Regressors            = 1 </span></span>
<span><span class="co">#R&gt;  Number of Unordered Categorical Regressors = 1 </span></span>
<span><span class="co">#R&gt;  Number of Ordered Categorical Regressors   = 2 </span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  Bandwidths are chosen via the plug-in method</span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;    Regressor       Type    Bandwidth</span></span>
<span><span class="co">#R&gt;  1       age    ordered 9.356700e-05</span></span>
<span><span class="co">#R&gt;  2      educ    ordered 9.049838e-05</span></span>
<span><span class="co">#R&gt;  3       sex     factor 5.909937e-04</span></span>
<span><span class="co">#R&gt;  4     unemp continuous 2.397334e-01</span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  Unconditional Treatment Effect on the Treated (ATET):</span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  TTa    = 0.07686</span></span>
<span><span class="co">#R&gt;  TTa sd = 0.05157</span></span>
<span><span class="co">#R&gt;  N(TTa) = 1690</span></span>
<span><span class="co">#R&gt;  Bootstrapped 95% confidence interval: [0.0112, 0.1510]</span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  p-value and confidence interval assuming ATET is normally distributed:</span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;            Coef.        SE       z      P&gt;|z|  [95% confidence interval]                                                                       </span></span>
<span><span class="co">#R&gt;  ATET     0.0769     0.0516    1.49     0.1361 -0.0242            0.1779</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">tym1a</span><span class="op">)</span></span></code></pre></div>
<p>Estimating <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><msub><mi>T</mi><mi>b</mi></msub></mrow><annotation encoding="application/x-tex">TT_b</annotation></semantics></math> will take longer. The bandwidths are cross-validated.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Show output as the estimation goes</span></span>
<span><span class="va">tym1b</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/didnpreg.html">didnpreg</a></span><span class="op">(</span></span>
<span>  <span class="va">form1</span>,</span>
<span>  data <span class="op">=</span> <span class="va">d0</span>,</span>
<span>  subset <span class="op">=</span> <span class="va">smpl</span>,</span>
<span>  bwmethod <span class="op">=</span> <span class="st">"CV"</span>,</span>
<span>  boot.num <span class="op">=</span> <span class="va">B</span>,</span>
<span>  TTx <span class="op">=</span> <span class="st">"TTb"</span>,</span>
<span>  print.level <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  digits <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  cores <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#R&gt;  Warning in didnpreg.default(outcome = Y, regressors = X, time = time, treated =</span></span>
<span><span class="co">#R&gt;  treated, : Data starts in 3, while the treatment is in 4</span></span>
<span><span class="co">#R&gt;  Number of observations = 6069 </span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  Number of observations in treated group after  the treatment (N_ 1, 1) = 1690 </span></span>
<span><span class="co">#R&gt;  Number of observations in treated group before the treatment (N_ 1, 0) = 1999 </span></span>
<span><span class="co">#R&gt;  Number of observations in control group after  the treatment (N_ 0, 1) = 1127 </span></span>
<span><span class="co">#R&gt;  Number of observations in control group before the treatment (N_ 0, 0) = 1253 </span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  Number of Continuous Regressors            = 1 </span></span>
<span><span class="co">#R&gt;  Number of Unordered Categorical Regressors = 1 </span></span>
<span><span class="co">#R&gt;  Number of Ordered Categorical Regressors   = 2 </span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  Calculating cross-validated bandwidths</span></span>
<span><span class="co">#R&gt;  Kernel Type for Continuous Regressors is               Gaussian</span></span>
<span><span class="co">#R&gt;  Kernel Type for Unordered Categorical Regressors is    Aitchison and Aitken</span></span>
<span><span class="co">#R&gt;  Kernel Type for Ordered Categorical is                 Li and Racine</span></span>
<span><span class="co">#R&gt;  Calculating cross-validated bandwidths completed in 1 second</span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;    Regressor       Type  Bandwidth</span></span>
<span><span class="co">#R&gt;  1       age    ordered 0.10774737</span></span>
<span><span class="co">#R&gt;  2      educ    ordered 0.05637391</span></span>
<span><span class="co">#R&gt;  3       sex     factor 0.05638123</span></span>
<span><span class="co">#R&gt;  4     unemp continuous 0.25507958</span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  Calculating ATET: TTb</span></span>
<span><span class="co">#R&gt;  TTb = -0.01958, N (TTb; all treated) = 3689</span></span>
<span><span class="co">#R&gt;  Calculating ATET completed in 0 seconds</span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  Bootstrapping standard errors (9 replications)</span></span>
<span><span class="co">#R&gt;  Calculating residuals completed</span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  Bootstrapping will take approximately: 1 second</span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;    |                                                                              |=========                                                             |  12%  |                                                                              |==================                                                    |  25%  |                                                                              |==========================                                            |  38%  |                                                                              |===================================                                   |  50%  |                                                                              |============================================                          |  62%  |                                                                              |====================================================                  |  75%  |                                                                              |=============================================================         |  88%  |                                                                              |======================================================================| 100%</span></span>
<span><span class="co">#R&gt;  Bootstrapping standard errors completed in 1 second</span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  TTb bootstrapped standard error = 0.1147 </span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  Bootstrapped confidence interval:</span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;                  Coef.        SE  [95% confidence interval]                                                          </span></span>
<span><span class="co">#R&gt;  ATET (TTb)    -0.0196     0.1147 -0.0812            0.2196</span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;  p-value and confidence interval assuming ATET (TTb) is normally distributed:</span></span>
<span><span class="co">#R&gt;  </span></span>
<span><span class="co">#R&gt;                  Coef.        SE       z      P&gt;|z|  [95% confidence interval]                                                                             </span></span>
<span><span class="co">#R&gt;  ATET (TTb)    -0.0196     0.1147   -0.17     0.8645 -0.2444            0.2052</span></span></code></pre></div>
<div class="section level3">
<h3 id="understanding-samples">Understanding samples<a class="anchor" aria-label="anchor" href="#understanding-samples"></a>
</h3>
<blockquote>
<p>To work with the results for the plot, <strong>didnpreg</strong> produces binary variables indicating different samples.</p>
</blockquote>
<p>The estimation sample is captured by the <em>esample</em> value, which is equal to 1 if this observation was used in the estimation and 0 otherwise:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span></span>
<span>  <span class="va">d0</span><span class="op">$</span><span class="va">year</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">esample</span><span class="op">]</span>,</span>
<span>  <span class="va">d0</span><span class="op">$</span><span class="va">treated</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">esample</span><span class="op">]</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#R&gt;        </span></span>
<span><span class="co">#R&gt;            0    1</span></span>
<span><span class="co">#R&gt;    2010  641  987</span></span>
<span><span class="co">#R&gt;    2011  612 1012</span></span>
<span><span class="co">#R&gt;    2013  587  866</span></span>
<span><span class="co">#R&gt;    2014  540  824</span></span></code></pre></div>
<p>The value <em>sample1</em> indicates <strong>all treated</strong> (before and after treatment) observations in the estimation sample <em>esample</em>. To subset the treated observations in the original dataset, double subsetting is required.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span></span>
<span>  <span class="va">d0</span><span class="op">$</span><span class="va">year</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">esample</span><span class="op">]</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">sample1</span><span class="op">]</span>,</span>
<span>  <span class="va">d0</span><span class="op">$</span><span class="va">treated</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">esample</span><span class="op">]</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">sample1</span><span class="op">]</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#R&gt;        </span></span>
<span><span class="co">#R&gt;            1</span></span>
<span><span class="co">#R&gt;    2010  987</span></span>
<span><span class="co">#R&gt;    2011 1012</span></span>
<span><span class="co">#R&gt;    2013  866</span></span>
<span><span class="co">#R&gt;    2014  824</span></span></code></pre></div>
<p>The value <em>sample11</em> indicates the <strong>treated</strong> observations in the post-treatment period in the estimation sample <em>esample</em>. To subset the treated observations in the original dataset, double subsetting is required.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span></span>
<span>  <span class="va">d0</span><span class="op">$</span><span class="va">year</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">esample</span><span class="op">]</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">sample11</span><span class="op">]</span>,</span>
<span>  <span class="va">d0</span><span class="op">$</span><span class="va">treated</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">esample</span><span class="op">]</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">sample11</span><span class="op">]</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#R&gt;        </span></span>
<span><span class="co">#R&gt;           1</span></span>
<span><span class="co">#R&gt;    2013 866</span></span>
<span><span class="co">#R&gt;    2014 824</span></span>
<span><span class="co"># or the same in case TTx = "TTa" was used by the 'didnpreg' command</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span></span>
<span>  <span class="va">d0</span><span class="op">$</span><span class="va">year</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">esample</span><span class="op">]</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">sample1</span><span class="op">]</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">TTa.positions.in.TTb</span><span class="op">]</span>,</span>
<span>  <span class="va">d0</span><span class="op">$</span><span class="va">treated</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">esample</span><span class="op">]</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">sample1</span><span class="op">]</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">TTa.positions.in.TTb</span><span class="op">]</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#R&gt;        </span></span>
<span><span class="co">#R&gt;           1</span></span>
<span><span class="co">#R&gt;    2013 866</span></span>
<span><span class="co">#R&gt;    2014 824</span></span></code></pre></div>
<p>The values of the individual TEs can be put to the dataset using double subsetting for TTb</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d0</span><span class="op">$</span><span class="va">TTbi</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">esample</span><span class="op">]</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">sample1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">tym1b</span><span class="op">$</span><span class="va">TTb.i</span></span>
<span><span class="va">d0</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">TTbi</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#R&gt;  # A tibble: 8 × 2</span></span>
<span><span class="co">#R&gt;     year     mean</span></span>
<span><span class="co">#R&gt;    &lt;int&gt;    &lt;dbl&gt;</span></span>
<span><span class="co">#R&gt;  1  2008 NaN     </span></span>
<span><span class="co">#R&gt;  2  2009 NaN     </span></span>
<span><span class="co">#R&gt;  3  2010  -0.0907</span></span>
<span><span class="co">#R&gt;  4  2011  -0.112 </span></span>
<span><span class="co">#R&gt;  5  2013   0.0595</span></span>
<span><span class="co">#R&gt;  6  2014   0.0959</span></span>
<span><span class="co">#R&gt;  7  2015 NaN     </span></span>
<span><span class="co">#R&gt;  8  2016 NaN</span></span></code></pre></div>
<p>or TTa</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d0</span><span class="op">$</span><span class="va">TTai</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">esample</span><span class="op">]</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">sample11</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">tym1b</span><span class="op">$</span><span class="va">TTa.i</span></span>
<span><span class="va">d0</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">TTai</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#R&gt;  # A tibble: 8 × 2</span></span>
<span><span class="co">#R&gt;     year     mean</span></span>
<span><span class="co">#R&gt;    &lt;int&gt;    &lt;dbl&gt;</span></span>
<span><span class="co">#R&gt;  1  2008 NaN     </span></span>
<span><span class="co">#R&gt;  2  2009 NaN     </span></span>
<span><span class="co">#R&gt;  3  2010 NaN     </span></span>
<span><span class="co">#R&gt;  4  2011 NaN     </span></span>
<span><span class="co">#R&gt;  5  2013   0.0595</span></span>
<span><span class="co">#R&gt;  6  2014   0.0959</span></span>
<span><span class="co">#R&gt;  7  2015 NaN     </span></span>
<span><span class="co">#R&gt;  8  2016 NaN</span></span></code></pre></div>
<blockquote>
<p>Just a remainder that TTa calculates the ATET in the post-treatment period, while TTb calculated the ATET in both prior and post-treatment periods.</p>
</blockquote>
</div>
</div>
<div class="section level2">
<h2 id="plotting-heterogenous-treatment-effects">Plotting Heterogenous Treatment Effects<a class="anchor" aria-label="anchor" href="#plotting-heterogenous-treatment-effects"></a>
</h2>
<p>To plot the heterogenous treatment effects, use the <strong>didnpplot</strong> command.</p>
<blockquote>
<p>The heterogenous treatment effects can be plotted <strong>by</strong> either continuous or categorical variable. They can also also be plotted <strong>by</strong> either continuous or categorical variable <strong>over</strong> another categorical variable.</p>
</blockquote>
<div class="section level3">
<h3 id="by-factor">‘by’: factor<a class="anchor" aria-label="anchor" href="#by-factor"></a>
</h3>
<div class="section level4">
<h4 id="education">education<a class="anchor" aria-label="anchor" href="#education"></a>
</h4>
<p>The heterogenous treatment effects are plotted for each level of education, since the ‘education’ is categorical variable.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tym1b_gr_educ</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/didnpplot.html">didnpplot</a></span><span class="op">(</span></span>
<span>  obj <span class="op">=</span> <span class="va">tym1b</span>,</span>
<span>  level <span class="op">=</span> <span class="fl">95</span>,</span>
<span>  by <span class="op">=</span> <span class="va">d0</span><span class="op">$</span><span class="va">educ</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">esample</span><span class="op">]</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">sample1</span><span class="op">]</span>,</span>
<span>  xlab <span class="op">=</span> <span class="st">"Education"</span>,</span>
<span>  ylab <span class="op">=</span> <span class="st">"ATET"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#R&gt;  [1] "1. 'by' is catergorical"</span></span>
<span><span class="co">#R&gt;  [1] "1.1 TTa + TTb"</span></span>
<span><span class="co">#R&gt;  [1] "1.1.1.1 TTb"</span></span>
<span><span class="co"># A</span></span>
<span><span class="va">tym1b_gr_educ</span><span class="op">$</span><span class="va">data.a</span></span>
<span><span class="co">#R&gt;            atet   atet.sd count by</span></span>
<span><span class="co">#R&gt;  1  0.081591779 0.0451107  1099  6</span></span>
<span><span class="co">#R&gt;  2  0.115493332 0.1194540   315  7</span></span>
<span><span class="co">#R&gt;  3 -0.006376054 0.1646767   146  8</span></span>
<span><span class="co">#R&gt;  4  0.093951311 0.1470528   108 10</span></span>
<span><span class="co">#R&gt;  5 -0.212163701 0.1524211    22 11</span></span>
<span><span class="va">tym1b_gr_educ</span><span class="op">$</span><span class="va">plot.a</span></span></code></pre></div>
<p><img src="reference/figures/README-tym1b_gr_educ-1.png"><!-- --></p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># B</span></span>
<span><span class="va">tym1b_gr_educ</span><span class="op">$</span><span class="va">data.b</span></span>
<span><span class="co">#R&gt;           atet   atet.sd count by</span></span>
<span><span class="co">#R&gt;  1 -0.02439588 0.1285654  2431  6</span></span>
<span><span class="co">#R&gt;  2 -0.05993423 0.1372308   731  7</span></span>
<span><span class="co">#R&gt;  3  0.01949751 0.1836709   250  8</span></span>
<span><span class="co">#R&gt;  4  0.13360339 0.2103177   238 10</span></span>
<span><span class="co">#R&gt;  5 -0.14795599 0.1505783    39 11</span></span>
<span><span class="va">tym1b_gr_educ</span><span class="op">$</span><span class="va">plot.b</span></span></code></pre></div>
<p><img src="reference/figures/README-tym1b_gr_educ-2.png"><!-- --></p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ggsave(paste0("atet_ci_education.pdf"), width = 15, height = 10, units = c("cm"))</span></span></code></pre></div>
<p>Here objects <code>data.a</code> and <code>data.b</code> contain data that is used to produce <code>plot.a</code> and <code>plot.b</code>. The graphs are <code>ggplot</code> objects and can be amended further.</p>
</div>
<div class="section level4">
<h4 id="time">time<a class="anchor" aria-label="anchor" href="#time"></a>
</h4>
<p>The heterogenous treatment effects over time show that the effect is significant in the second year after the treatment.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tym1b_gr_time</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/didnpplot.html">didnpplot</a></span><span class="op">(</span></span>
<span>  obj <span class="op">=</span> <span class="va">tym1b</span>,</span>
<span>  level <span class="op">=</span> <span class="fl">95</span>,</span>
<span>  by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">d0</span><span class="op">$</span><span class="va">t</span><span class="op">)</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">esample</span><span class="op">]</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">sample1</span><span class="op">]</span>,</span>
<span>  xlab <span class="op">=</span> <span class="st">"Time"</span>,</span>
<span>  ylab <span class="op">=</span> <span class="st">"ATET"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#R&gt;  [1] "1. 'by' is catergorical"</span></span>
<span><span class="co">#R&gt;  [1] "1.1 TTa + TTb"</span></span>
<span><span class="co">#R&gt;  [1] "1.1.1.1 TTb"</span></span>
<span><span class="co"># A</span></span>
<span><span class="va">tym1b_gr_time</span><span class="op">$</span><span class="va">data.a</span></span>
<span><span class="co">#R&gt;          atet    atet.sd count by</span></span>
<span><span class="co">#R&gt;  1        NaN         NA     0 -1</span></span>
<span><span class="co">#R&gt;  2        NaN         NA     0  0</span></span>
<span><span class="co">#R&gt;  3 0.05952727 0.04936723   866  1</span></span>
<span><span class="co">#R&gt;  4 0.09593129 0.02332707   824  2</span></span>
<span><span class="va">tym1b_gr_time</span><span class="op">$</span><span class="va">plot.a</span></span>
<span><span class="co">#R&gt;  Warning: Removed 2 rows containing missing values or values outside the scale range</span></span>
<span><span class="co">#R&gt;  (`geom_bar()`).</span></span>
<span><span class="co">#R&gt;  Warning: Removed 2 rows containing missing values or values outside the scale range</span></span>
<span><span class="co">#R&gt;  (`geom_point()`).</span></span></code></pre></div>
<p><img src="reference/figures/README-tym1b_gr_time-1.png"><!-- --></p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># B</span></span>
<span><span class="va">tym1b_gr_time</span><span class="op">$</span><span class="va">data.b</span></span>
<span><span class="co">#R&gt;           atet    atet.sd count by</span></span>
<span><span class="co">#R&gt;  1 -0.09065350 0.20873893   987 -1</span></span>
<span><span class="co">#R&gt;  2 -0.11199566 0.18456021  1012  0</span></span>
<span><span class="co">#R&gt;  3  0.05952727 0.04936723   866  1</span></span>
<span><span class="co">#R&gt;  4  0.09593129 0.02332707   824  2</span></span>
<span><span class="va">tym1b_gr_time</span><span class="op">$</span><span class="va">plot.b</span></span></code></pre></div>
<p><img src="reference/figures/README-tym1b_gr_time-2.png"><!-- --></p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ggsave(paste0("atet_ci_time.pdf"), width = 15, height = 10, units = c("cm"))</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="sex">sex<a class="anchor" aria-label="anchor" href="#sex"></a>
</h4>
<p>Another example is the graph with the heterogenous treatment effects by sex:</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tym1b_gr_sex</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/didnpplot.html">didnpplot</a></span><span class="op">(</span></span>
<span>  obj <span class="op">=</span> <span class="va">tym1b</span>,</span>
<span>  level <span class="op">=</span> <span class="fl">95</span>,</span>
<span>  by <span class="op">=</span> <span class="va">d0</span><span class="op">$</span><span class="va">sex</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">esample</span><span class="op">]</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">sample1</span><span class="op">]</span>,</span>
<span>  xlab <span class="op">=</span> <span class="st">"Sex"</span>,</span>
<span>  ylab <span class="op">=</span> <span class="st">"ATET"</span>,</span>
<span>  by.labels.values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span>,<span class="st">"2"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Male"</span>, <span class="st">"Female"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#R&gt;  [1] "1. 'by' is catergorical"</span></span>
<span><span class="co">#R&gt;  [1] "1.1 TTa + TTb"</span></span>
<span><span class="co">#R&gt;  [1] "1.1.1.1 TTb"</span></span>
<span><span class="co"># A</span></span>
<span><span class="va">tym1b_gr_sex</span><span class="op">$</span><span class="va">data.a</span></span>
<span><span class="co">#R&gt;          atet    atet.sd count     by byold</span></span>
<span><span class="co">#R&gt;  1 0.12242162 0.04362860   830   Male     1</span></span>
<span><span class="co">#R&gt;  2 0.03370704 0.04265994   860 Female     2</span></span>
<span><span class="va">tym1b_gr_sex</span><span class="op">$</span><span class="va">plot.a</span></span></code></pre></div>
<p><img src="reference/figures/README-tym1b_gr_sex-1.png"><!-- --></p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># B</span></span>
<span><span class="va">tym1b_gr_sex</span><span class="op">$</span><span class="va">data.b</span></span>
<span><span class="co">#R&gt;          atet   atet.sd count     by byold</span></span>
<span><span class="co">#R&gt;  1  0.1083980 0.1468353  1820   Male     1</span></span>
<span><span class="co">#R&gt;  2 -0.1441953 0.1109034  1869 Female     2</span></span>
<span><span class="va">tym1b_gr_sex</span><span class="op">$</span><span class="va">plot.b</span></span></code></pre></div>
<p><img src="reference/figures/README-tym1b_gr_sex-2.png"><!-- --></p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ggsave(paste0("atet_ci_sex.pdf"), width = 15, height = 10, units = c("cm"))</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="by-continuous-unemp">‘by’ continuous: unemp<a class="anchor" aria-label="anchor" href="#by-continuous-unemp"></a>
</h3>
<p>When the ‘by’ variable is continuous the <strong>didnpplot</strong> offers three ways of plotting the heterogeneous treatment effects.</p>
<div class="section level4">
<h4 id="scale-of-the-continuous-by-is-its-range">Scale of the continuous ‘by’ is its range<a class="anchor" aria-label="anchor" href="#scale-of-the-continuous-by-is-its-range"></a>
</h4>
<p>If <code>by.continuous.scale</code> is not specified, <strong>didnpplot</strong> will use each unique value in the ‘by’ variable to produce the plot, which can be pretty rugged.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tym1b_gr_unemp_each_value</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/didnpplot.html">didnpplot</a></span><span class="op">(</span></span>
<span>  obj <span class="op">=</span> <span class="va">tym1b</span>,</span>
<span>  level <span class="op">=</span> <span class="fl">95</span>,</span>
<span>  by <span class="op">=</span> <span class="va">d0</span><span class="op">$</span><span class="va">unemp</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">esample</span><span class="op">]</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">sample1</span><span class="op">]</span>,</span>
<span>  xlab <span class="op">=</span> <span class="st">"Unemployment"</span>,</span>
<span>  ylab <span class="op">=</span> <span class="st">"ATET"</span>,</span>
<span>  add.zero.line <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#R&gt;  [1] "2. 'by' is continuous"</span></span>
<span><span class="co">#R&gt;  [1] "Scale of the continuous 'by' is its range"</span></span>
<span><span class="co">#R&gt;  [1] "2.1 TTa + TTb"</span></span>
<span><span class="co">#R&gt;  [1] "2.1.1 only 'by'"</span></span>
<span><span class="co">#R&gt;  [1] "2.1.1.1 TTb"</span></span>
<span><span class="co">#R&gt;  [1] "2.1.1.2 TTa"</span></span>
<span><span class="co"># A</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tym1b_gr_unemp_each_value</span><span class="op">$</span><span class="va">data.a</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#R&gt;           by        atet   atet.sd count bySorted</span></span>
<span><span class="co">#R&gt;  1  3.250000 -0.19049195 0.3537036     5       11</span></span>
<span><span class="co">#R&gt;  2  3.633333  0.19263242 0.2635572    12       12</span></span>
<span><span class="co">#R&gt;  3  3.675000 -0.23194790 0.3768544     2       13</span></span>
<span><span class="co">#R&gt;  4  4.208333 -0.03449124 0.2506374     8       14</span></span>
<span><span class="co">#R&gt;  5  4.225000 -0.01457554 0.3469653     2       15</span></span>
<span><span class="co">#R&gt;  6  4.266667  0.32313251 0.2900830     3       16</span></span>
<span><span class="co">#R&gt;  7  4.333333 -0.12309935 0.5178850     2       17</span></span>
<span><span class="co">#R&gt;  8  4.341667  0.25388070 0.2578872     2       18</span></span>
<span><span class="co">#R&gt;  9  4.383333  0.46391603 0.1205616     2       19</span></span>
<span><span class="co">#R&gt;  10 4.508333  0.34287349 0.2193550     4       20</span></span>
<span><span class="va">tym1b_gr_unemp_each_value</span><span class="op">$</span><span class="va">plot.a</span></span></code></pre></div>
<p><img src="reference/figures/README-tym1b_gr_unemp_each_value-1.png"><!-- --></p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># B</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tym1b_gr_unemp_each_value</span><span class="op">$</span><span class="va">data.b</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#R&gt;           by         atet    atet.sd count bySorted</span></span>
<span><span class="co">#R&gt;  90 8.158333  0.060637426 0.03905095    22      100</span></span>
<span><span class="co">#R&gt;  91 8.166667 -0.004659572 0.08898991     7      101</span></span>
<span><span class="co">#R&gt;  92 8.191667 -0.021635638 0.05942190   212      102</span></span>
<span><span class="co">#R&gt;  93 8.358333 -0.064491354 0.06094120    11      103</span></span>
<span><span class="co">#R&gt;  94 8.375000  0.204438487 0.17334786     4      104</span></span>
<span><span class="co">#R&gt;  95 8.491667 -0.287098972 0.10145868     1      105</span></span>
<span><span class="co">#R&gt;  96 8.500000  0.007956669 0.06946111     1      106</span></span>
<span><span class="co">#R&gt;  97 8.525000 -0.112077329 0.06236632    21      107</span></span>
<span><span class="co">#R&gt;  98 8.641667  0.352642084 0.23338565     2      108</span></span>
<span><span class="co">#R&gt;  99 8.658333 -0.302495127 0.33032693     1      109</span></span>
<span><span class="va">tym1b_gr_unemp_each_value</span><span class="op">$</span><span class="va">plot.b</span></span></code></pre></div>
<p><img src="reference/figures/README-tym1b_gr_unemp_each_value-2.png"><!-- --></p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ggsave(paste0("atet_ci_unemp_numeric.pdf"), width = 15, height = 10, units = c("cm"))</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="scale-of-the-continuous-by-intervals">Scale of the continuous ‘by’ intervals<a class="anchor" aria-label="anchor" href="#scale-of-the-continuous-by-intervals"></a>
</h4>
<p>Setting <code>by.continuous.scale</code> to a single number, instructs <strong>didnpplot</strong> to split the range of the continuous ‘by’ variable into the number of intervals specified by <code>by.continuous.scale</code> and plot ATET by intervals.</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tym1b_gr_unemp_n_intervals</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/didnpplot.html">didnpplot</a></span><span class="op">(</span></span>
<span>  obj <span class="op">=</span> <span class="va">tym1b</span>,</span>
<span>  level <span class="op">=</span> <span class="fl">95</span>,</span>
<span>  by <span class="op">=</span> <span class="va">d0</span><span class="op">$</span><span class="va">unemp</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">esample</span><span class="op">]</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">sample1</span><span class="op">]</span>,</span>
<span>  by.continuous.scale <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  xlab <span class="op">=</span> <span class="st">"Unemployment"</span>,</span>
<span>  ylab <span class="op">=</span> <span class="st">"ATET"</span>,</span>
<span>  by.labels.values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span>,<span class="st">"2"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Male"</span>, <span class="st">"Female"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#R&gt;  [1] "2. 'by' is continuous"</span></span>
<span><span class="co">#R&gt;  [1] "Scale of the continuous 'by' is determined by the number of intervals 'by.continuous.scale'"</span></span>
<span><span class="co">#R&gt;  [1] "2.1 TTa + TTb"</span></span>
<span><span class="co">#R&gt;  [1] "2.1.1 only 'by'"</span></span>
<span><span class="co">#R&gt;  [1] "2.1.1.1 TTb"</span></span>
<span><span class="co">#R&gt;  [1] "2.1.1.2 TTa"</span></span>
<span><span class="co"># A</span></span>
<span><span class="va">tym1b_gr_unemp_n_intervals</span><span class="op">$</span><span class="va">data.a</span></span>
<span><span class="co">#R&gt;              by        atet    atet.sd count bySorted</span></span>
<span><span class="co">#R&gt;  1  (3.24,3.92]  0.04711755 0.29305415    19       11</span></span>
<span><span class="co">#R&gt;  2  (3.92,4.59]  0.14022632 0.25306209    23       12</span></span>
<span><span class="co">#R&gt;  3  (4.59,5.27]  0.20393764 0.11676751   183       13</span></span>
<span><span class="co">#R&gt;  4  (5.27,5.94]  0.14916172 0.07037290    31       14</span></span>
<span><span class="co">#R&gt;  5  (5.94,6.61]  0.24172149 0.10460361   235       15</span></span>
<span><span class="co">#R&gt;  6  (6.61,7.28]  0.09215862 0.06457640   155       16</span></span>
<span><span class="co">#R&gt;  7  (7.28,7.95]  0.04912287 0.03209802   497       17</span></span>
<span><span class="co">#R&gt;  8  (7.95,8.62]  0.04168082 0.03983559    38       18</span></span>
<span><span class="co">#R&gt;  9   (8.62,9.3] -0.02332736 0.07970877   475       19</span></span>
<span><span class="co">#R&gt;  10  (9.3,9.97] -0.04334175 0.10649708    34       20</span></span>
<span><span class="va">tym1b_gr_unemp_n_intervals</span><span class="op">$</span><span class="va">plot.a</span></span></code></pre></div>
<p><img src="reference/figures/README-tym1b_gr_unemp_n_intervals-1.png"><!-- --></p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># B</span></span>
<span><span class="va">tym1b_gr_unemp_n_intervals</span><span class="op">$</span><span class="va">data.b</span></span>
<span><span class="co">#R&gt;              by          atet    atet.sd count bySorted</span></span>
<span><span class="co">#R&gt;  4   (3.24,4.3]  0.0487359376 0.27955405    32       11</span></span>
<span><span class="co">#R&gt;  5   (4.3,5.35]  0.1939881540 0.12408660   196       12</span></span>
<span><span class="co">#R&gt;  6  (5.35,6.39]  0.2576802413 0.10133309   236       13</span></span>
<span><span class="co">#R&gt;  7  (6.39,7.44]  0.1041843329 0.07649189   233       14</span></span>
<span><span class="co">#R&gt;  8  (7.44,8.49]  0.0241646891 0.03282944   984       15</span></span>
<span><span class="co">#R&gt;  9  (8.49,9.54] -0.0382384057 0.07558224   647       16</span></span>
<span><span class="co">#R&gt;  10 (9.54,10.6]  0.0002260922 0.10671673   231       17</span></span>
<span><span class="co">#R&gt;  1  (10.6,11.6]  0.0182540261 0.17749664    53       18</span></span>
<span><span class="co">#R&gt;  2  (11.6,12.7] -0.1795941168 0.34250554  1032       19</span></span>
<span><span class="co">#R&gt;  3  (12.7,13.7] -0.2578154370 0.41340096    45       20</span></span>
<span><span class="va">tym1b_gr_unemp_n_intervals</span><span class="op">$</span><span class="va">plot.b</span></span></code></pre></div>
<p><img src="reference/figures/README-tym1b_gr_unemp_n_intervals-2.png"><!-- --></p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ggsave(paste0("atet_ci_unemp_intervals.pdf"), width = 15, height = 10, units = c("cm"))</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="scale-of-the-continuous-by-a-vector">Scale of the continuous ‘by’ a vector<a class="anchor" aria-label="anchor" href="#scale-of-the-continuous-by-a-vector"></a>
</h4>
<p>Setting <code>by.continuous.scale</code> to a single number, instructs <strong>didnpplot</strong> to split the range of the continuous ‘by’ variable into intervals defined by the specified vector and plot ATET by intervals.</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tym1b_gr_unemp_vector_breaks</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/didnpplot.html">didnpplot</a></span><span class="op">(</span></span>
<span>  obj <span class="op">=</span> <span class="va">tym1b</span>,</span>
<span>  level <span class="op">=</span> <span class="fl">95</span>,</span>
<span>  by <span class="op">=</span> <span class="va">d0</span><span class="op">$</span><span class="va">unemp</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">esample</span><span class="op">]</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">sample1</span><span class="op">]</span>,</span>
<span>  by.continuous.scale <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">7</span>, <span class="fl">9</span>, <span class="fl">12</span><span class="op">)</span>,</span>
<span>  xlab <span class="op">=</span> <span class="st">"Unemployment"</span>,</span>
<span>  ylab <span class="op">=</span> <span class="st">"ATET"</span>,</span>
<span>  by.labels.values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span>,<span class="st">"2"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Male"</span>, <span class="st">"Female"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#R&gt;  [1] "2. 'by' is continuous"</span></span>
<span><span class="co">#R&gt;  [1] "Scale of the continuous 'by' is determined by the vector in 'by.continuous.scale'"</span></span>
<span><span class="co">#R&gt;  [1] "2.1 TTa + TTb"</span></span>
<span><span class="co">#R&gt;  [1] "2.1.1 only 'by'"</span></span>
<span><span class="co">#R&gt;  [1] "2.1.1.1 TTb"</span></span>
<span><span class="co">#R&gt;  [1] "2.1.1.2 TTa"</span></span>
<span><span class="co"># A</span></span>
<span><span class="va">tym1b_gr_unemp_vector_breaks</span><span class="op">$</span><span class="va">data.a</span></span>
<span><span class="co">#R&gt;          by        atet    atet.sd count bySorted</span></span>
<span><span class="co">#R&gt;  5 [3.25,4]  0.04711755 0.29305415    19       11</span></span>
<span><span class="co">#R&gt;  1    (4,5]  0.22313076 0.19130411    42       12</span></span>
<span><span class="co">#R&gt;  2    (5,7]  0.19931725 0.06231084   512       13</span></span>
<span><span class="co">#R&gt;  3    (7,9]  0.05048265 0.03129880   611       14</span></span>
<span><span class="co">#R&gt;  4 (9,9.97] -0.02483015 0.07955994   506       15</span></span>
<span><span class="va">tym1b_gr_unemp_vector_breaks</span><span class="op">$</span><span class="va">plot.a</span></span></code></pre></div>
<p><img src="reference/figures/README-tym1b_gr_unemp_vector_breaks-1.png"><!-- --></p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># B</span></span>
<span><span class="va">tym1b_gr_unemp_vector_breaks</span><span class="op">$</span><span class="va">data.b</span></span>
<span><span class="co">#R&gt;           by        atet    atet.sd count bySorted</span></span>
<span><span class="co">#R&gt;  6  [3.25,4]  0.04711755 0.29305415    19       11</span></span>
<span><span class="co">#R&gt;  2     (4,5]  0.20096410 0.19962148    43       12</span></span>
<span><span class="co">#R&gt;  3     (5,7]  0.19979684 0.06545451   538       13</span></span>
<span><span class="co">#R&gt;  4     (7,9]  0.02297749 0.03276099  1153       14</span></span>
<span><span class="co">#R&gt;  5    (9,12] -0.08431108 0.16201422  1407       15</span></span>
<span><span class="co">#R&gt;  1 (12,13.7] -0.18357535 0.38223899   529       16</span></span>
<span><span class="va">tym1b_gr_unemp_vector_breaks</span><span class="op">$</span><span class="va">plot.b</span></span></code></pre></div>
<p><img src="reference/figures/README-tym1b_gr_unemp_vector_breaks-2.png"><!-- --></p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ggsave(paste0("atet_ci_unemp_breaks.pdf"), width = 15, height = 10, units = c("cm"))</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="by-factor--over">‘by’: factor + ’over<a class="anchor" aria-label="anchor" href="#by-factor--over"></a>
</h3>
<blockquote>
<p>The heterogeneous treatment effects can be plotted by <strong>either</strong> continuous or categorical variable over a <strong>categorical</strong> variable.</p>
</blockquote>
<div class="section level4">
<h4 id="by-sex-over-is-time">‘by’: sex; ‘over’ is time<a class="anchor" aria-label="anchor" href="#by-sex-over-is-time"></a>
</h4>
<p>This is an example with treatment effects by sex over time.</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tym1b_gr_sex_time</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/didnpplot.html">didnpplot</a></span><span class="op">(</span></span>
<span>  obj <span class="op">=</span> <span class="va">tym1b</span>,</span>
<span>  level <span class="op">=</span> <span class="fl">95</span>,</span>
<span>  by <span class="op">=</span> <span class="va">d0</span><span class="op">$</span><span class="va">sex</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">esample</span><span class="op">]</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">sample1</span><span class="op">]</span>,</span>
<span>  over <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span> <span class="va">d0</span><span class="op">$</span><span class="va">t</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">esample</span><span class="op">]</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">sample1</span><span class="op">]</span><span class="op">)</span>,</span>
<span>  <span class="co"># over = d0$educ[tym1b$esample][tym1b$sample1],</span></span>
<span>  xlab <span class="op">=</span> <span class="st">"Sex"</span>,</span>
<span>  ylab <span class="op">=</span> <span class="st">"ATET"</span>,</span>
<span>  by.labels.values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span>,<span class="st">"2"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Male"</span>, <span class="st">"Female"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#R&gt;  [1] "1. 'by' is catergorical"</span></span>
<span><span class="co">#R&gt;  [1] "1.1 TTa + TTb"</span></span>
<span><span class="co">#R&gt;  [1] "1.1.2 'by' + 'over'"</span></span>
<span><span class="co"># A</span></span>
<span><span class="va">tym1b_gr_sex_time</span><span class="op">$</span><span class="va">data.a</span></span>
<span><span class="co">#R&gt;           atet    atet.sd count     by byold over overSorted</span></span>
<span><span class="co">#R&gt;  1  0.15487893 0.06557617   435   Male     1    1         13</span></span>
<span><span class="co">#R&gt;  3 -0.03670933 0.05873056   431 Female     2    1         13</span></span>
<span><span class="co">#R&gt;  2  0.08667750 0.06857070   395   Male     1    2         14</span></span>
<span><span class="co">#R&gt;  4  0.10445169 0.03725823   429 Female     2    2         14</span></span>
<span><span class="va">tym1b_gr_sex_time</span><span class="op">$</span><span class="va">plot.a</span></span></code></pre></div>
<p><img src="reference/figures/README-tym1b_gr_sex_time-1.png"><!-- --></p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># B</span></span>
<span><span class="va">tym1b_gr_sex_time</span><span class="op">$</span><span class="va">data.b</span></span>
<span><span class="co">#R&gt;           atet    atet.sd count     by byold over overSorted bySorted</span></span>
<span><span class="co">#R&gt;  5 -0.29711910 0.20547325   497 Female     2   -1         11       11</span></span>
<span><span class="co">#R&gt;  1  0.11876160 0.26991930   490   Male     1   -1         11       12</span></span>
<span><span class="co">#R&gt;  6 -0.29457202 0.16908988   512 Female     2    0         12       11</span></span>
<span><span class="co">#R&gt;  2  0.07496254 0.23826069   500   Male     1    0         12       12</span></span>
<span><span class="co">#R&gt;  7 -0.03670933 0.05873056   431 Female     2    1         13       11</span></span>
<span><span class="co">#R&gt;  3  0.15487893 0.06557617   435   Male     1    1         13       12</span></span>
<span><span class="co">#R&gt;  8  0.10445169 0.03725823   429 Female     2    2         14       11</span></span>
<span><span class="co">#R&gt;  4  0.08667750 0.06857070   395   Male     1    2         14       12</span></span>
<span><span class="va">tym1b_gr_sex_time</span><span class="op">$</span><span class="va">plot.b</span></span></code></pre></div>
<p><img src="reference/figures/README-tym1b_gr_sex_time-2.png"><!-- --></p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ggsave(paste0("atet_ci_sex_time.pdf"), width = 15, height = 10, units = c("cm"))</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="by-time-over-is-sex">‘by’: time; ‘over’ is sex<a class="anchor" aria-label="anchor" href="#by-time-over-is-sex"></a>
</h4>
<p>This is an example with treatment effects by time over sex, reversing the order of the previous graph.</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tym1b_gr_time_sex</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/didnpplot.html">didnpplot</a></span><span class="op">(</span></span>
<span>  obj <span class="op">=</span> <span class="va">tym1b</span>,</span>
<span>  level <span class="op">=</span> <span class="fl">95</span>,</span>
<span>  over <span class="op">=</span> <span class="va">d0</span><span class="op">$</span><span class="va">sex</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">esample</span><span class="op">]</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">sample1</span><span class="op">]</span>,</span>
<span>  by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span> <span class="va">d0</span><span class="op">$</span><span class="va">t</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">esample</span><span class="op">]</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">sample1</span><span class="op">]</span><span class="op">)</span>,</span>
<span>  <span class="co"># over = d0$educ[tym1b$esample][tym1b$sample1],</span></span>
<span>  xlab <span class="op">=</span> <span class="st">"Time"</span>,</span>
<span>  ylab <span class="op">=</span> <span class="st">"ATET"</span>,</span>
<span>  over.labels.values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span>,<span class="st">"2"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Male"</span>, <span class="st">"Female"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#R&gt;  [1] "1. 'by' is catergorical"</span></span>
<span><span class="co">#R&gt;  [1] "1.1 TTa + TTb"</span></span>
<span><span class="co">#R&gt;  [1] "1.1.2 'by' + 'over'"</span></span>
<span><span class="co"># A</span></span>
<span><span class="va">tym1b_gr_time_sex</span><span class="op">$</span><span class="va">data.a</span></span>
<span><span class="co">#R&gt;           atet    atet.sd count by   over overold overSorted</span></span>
<span><span class="co">#R&gt;  1  0.15487893 0.06557617   435  1   Male       1         11</span></span>
<span><span class="co">#R&gt;  2  0.08667750 0.06857070   395  2   Male       1         11</span></span>
<span><span class="co">#R&gt;  3 -0.03670933 0.05873056   431  1 Female       2         12</span></span>
<span><span class="co">#R&gt;  4  0.10445169 0.03725823   429  2 Female       2         12</span></span>
<span><span class="va">tym1b_gr_time_sex</span><span class="op">$</span><span class="va">plot.a</span></span></code></pre></div>
<p><img src="reference/figures/README-tym1b_gr_time_sex-1.png"><!-- --></p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># B</span></span>
<span><span class="va">tym1b_gr_time_sex</span><span class="op">$</span><span class="va">data.b</span></span>
<span><span class="co">#R&gt;           atet    atet.sd count by   over overold overSorted bySorted</span></span>
<span><span class="co">#R&gt;  1  0.11876160 0.26991930   490 -1   Male       1         11       11</span></span>
<span><span class="co">#R&gt;  2  0.07496254 0.23826069   500  0   Male       1         11       12</span></span>
<span><span class="co">#R&gt;  3  0.15487893 0.06557617   435  1   Male       1         11       13</span></span>
<span><span class="co">#R&gt;  4  0.08667750 0.06857070   395  2   Male       1         11       14</span></span>
<span><span class="co">#R&gt;  5 -0.29711910 0.20547325   497 -1 Female       2         12       11</span></span>
<span><span class="co">#R&gt;  6 -0.29457202 0.16908988   512  0 Female       2         12       12</span></span>
<span><span class="co">#R&gt;  7 -0.03670933 0.05873056   431  1 Female       2         12       13</span></span>
<span><span class="co">#R&gt;  8  0.10445169 0.03725823   429  2 Female       2         12       14</span></span>
<span><span class="va">tym1b_gr_time_sex</span><span class="op">$</span><span class="va">plot.b</span></span></code></pre></div>
<p><img src="reference/figures/README-tym1b_gr_time_sex-2.png"><!-- --></p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ggsave(paste0("atet_ci_time_sex.pdf"), width = 15, height = 10, units = c("cm"))</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="by-continuous-unemp--over">‘by’ continuous: unemp + ‘over’<a class="anchor" aria-label="anchor" href="#by-continuous-unemp--over"></a>
</h3>
<p>The following examples use continuous ‘by’ variable to plot the heterogeneous treatment facts over sex.</p>
<div class="section level4">
<h4 id="scale-of-the-continuous-by-is-its-range-1">Scale of the continuous ‘by’ is its range<a class="anchor" aria-label="anchor" href="#scale-of-the-continuous-by-is-its-range-1"></a>
</h4>
<p><code>by.continuous.scale</code> is not specified or <code>NULL</code>.</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tym1b_gr_unemp_each_value_sex</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/didnpplot.html">didnpplot</a></span><span class="op">(</span></span>
<span>  obj <span class="op">=</span> <span class="va">tym1b</span>,</span>
<span>  level <span class="op">=</span> <span class="fl">95</span>,</span>
<span>  by <span class="op">=</span> <span class="va">d0</span><span class="op">$</span><span class="va">unemp</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">esample</span><span class="op">]</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">sample1</span><span class="op">]</span>,</span>
<span>  over <span class="op">=</span> <span class="va">d0</span><span class="op">$</span><span class="va">sex</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">esample</span><span class="op">]</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">sample1</span><span class="op">]</span>,</span>
<span>  xlab <span class="op">=</span> <span class="st">"Unemployment"</span>,</span>
<span>  ylab <span class="op">=</span> <span class="st">"ATET"</span>,</span>
<span>  over.labels.values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span>,<span class="st">"2"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Male"</span>, <span class="st">"Female"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#R&gt;  [1] "2. 'by' is continuous"</span></span>
<span><span class="co">#R&gt;  [1] "Scale of the continuous 'by' is its range"</span></span>
<span><span class="co">#R&gt;  [1] "2.1 TTa + TTb"</span></span>
<span><span class="co">#R&gt;  [1] "2.1.2 'by' + 'over'"</span></span>
<span><span class="co">#R&gt;  [1] "2.1.2.1 TTb"</span></span>
<span><span class="co">#R&gt;  [1] "2.1.2.2 TTa"</span></span>
<span><span class="co"># A</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tym1b_gr_unemp_each_value_sex</span><span class="op">$</span><span class="va">data.a</span><span class="op">)</span></span>
<span><span class="co">#R&gt;             atet   atet.sd count       by   over overold bySorted</span></span>
<span><span class="co">#R&gt;  1    0.06520778 0.3809980     3 3.250000   Male       1       11</span></span>
<span><span class="co">#R&gt;  68  -0.57404154 0.3692407     2 3.250000 Female       2       11</span></span>
<span><span class="co">#R&gt;  3    0.11092450 0.2598654     8 3.633333   Male       1       12</span></span>
<span><span class="co">#R&gt;  70   0.35604826 0.3501705     4 3.633333 Female       2       12</span></span>
<span><span class="co">#R&gt;  111 -0.23194790 0.3768544     2 3.675000 Female       2       13</span></span>
<span><span class="co">#R&gt;  6   -0.56573149 0.2873870     3 4.208333   Male       1       14</span></span>
<span><span class="va">tym1b_gr_unemp_each_value_sex</span><span class="op">$</span><span class="va">plot.a</span></span></code></pre></div>
<p><img src="reference/figures/README-tym1b_gr_unemp_each_value_sex-1.png"><!-- --></p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># B</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tym1b_gr_unemp_each_value_sex</span><span class="op">$</span><span class="va">data.b</span><span class="op">)</span></span>
<span><span class="co">#R&gt;             atet    atet.sd count       by   over overold bySorted</span></span>
<span><span class="co">#R&gt;  1    0.15636670 0.05029801    13 8.158333   Male       1      100</span></span>
<span><span class="co">#R&gt;  125 -0.07763820 0.11197357     9 8.158333 Female       2      100</span></span>
<span><span class="co">#R&gt;  3    0.06983619 0.07587865     4 8.166667   Male       1      101</span></span>
<span><span class="co">#R&gt;  136 -0.10398725 0.17276936     3 8.166667 Female       2      101</span></span>
<span><span class="co">#R&gt;  5    0.11313203 0.06131618    95 8.191667   Male       1      102</span></span>
<span><span class="co">#R&gt;  120 -0.13106238 0.09535865   117 8.191667 Female       2      102</span></span>
<span><span class="va">tym1b_gr_unemp_each_value_sex</span><span class="op">$</span><span class="va">plot.b</span></span></code></pre></div>
<p><img src="reference/figures/README-tym1b_gr_unemp_each_value_sex-2.png"><!-- --></p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ggsave(paste0("atet_ci_unemp_sex_numeric.pdf"), width = 15, height = 10, units = c("cm"))</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="scale-of-the-continuous-by-intervals-1">Scale of the continuous ‘by’ intervals<a class="anchor" aria-label="anchor" href="#scale-of-the-continuous-by-intervals-1"></a>
</h4>
<p><code>by.continuous.scale</code> is a scalar.</p>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tym1b_gr_unemp_intervals_sex</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/didnpplot.html">didnpplot</a></span><span class="op">(</span></span>
<span>  obj <span class="op">=</span> <span class="va">tym1b</span>,</span>
<span>  level <span class="op">=</span> <span class="fl">95</span>,</span>
<span>  by <span class="op">=</span> <span class="va">d0</span><span class="op">$</span><span class="va">unemp</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">esample</span><span class="op">]</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">sample1</span><span class="op">]</span>,</span>
<span>  by.continuous.scale <span class="op">=</span> <span class="fl">15</span>,</span>
<span>  over <span class="op">=</span> <span class="va">d0</span><span class="op">$</span><span class="va">sex</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">esample</span><span class="op">]</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">sample1</span><span class="op">]</span>,</span>
<span>  xlab <span class="op">=</span> <span class="st">"Unemployment"</span>,</span>
<span>  ylab <span class="op">=</span> <span class="st">"ATET"</span>,</span>
<span>  over.labels.values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span>,<span class="st">"2"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Male"</span>, <span class="st">"Female"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#R&gt;  [1] "2. 'by' is continuous"</span></span>
<span><span class="co">#R&gt;  [1] "Scale of the continuous 'by' is determined by the number of intervals 'by.continuous.scale'"</span></span>
<span><span class="co">#R&gt;  [1] "2.1 TTa + TTb"</span></span>
<span><span class="co">#R&gt;  [1] "2.1.2 'by' + 'over'"</span></span>
<span><span class="co">#R&gt;  [1] "2.1.2.1 TTb"</span></span>
<span><span class="co">#R&gt;  [1] "2.1.2.2 TTa"</span></span>
<span><span class="co"># A</span></span>
<span><span class="va">tym1b_gr_unemp_intervals_sex</span><span class="op">$</span><span class="va">data.a</span></span>
<span><span class="co">#R&gt;             atet    atet.sd count          by   over overold bySorted</span></span>
<span><span class="co">#R&gt;  1   0.098456304 0.29009104    11  (3.24,3.7]   Male       1       11</span></span>
<span><span class="co">#R&gt;  15 -0.023473232 0.34713905     8  (3.24,3.7] Female       2       11</span></span>
<span><span class="co">#R&gt;  2  -0.137068706 0.21268651     7 (4.15,4.59]   Male       1       13</span></span>
<span><span class="co">#R&gt;  16  0.261542887 0.30764949    16 (4.15,4.59] Female       2       13</span></span>
<span><span class="co">#R&gt;  3   0.157909186 0.13906050     9 (4.59,5.04]   Male       1       14</span></span>
<span><span class="co">#R&gt;  17  0.472510403 0.17203267    10 (4.59,5.04] Female       2       14</span></span>
<span><span class="co">#R&gt;  4   0.049279533 0.08699492    81 (5.04,5.49]   Male       1       15</span></span>
<span><span class="co">#R&gt;  18  0.307158623 0.18321599    87 (5.04,5.49] Female       2       15</span></span>
<span><span class="co">#R&gt;  5   0.002894773 0.10054691    13 (5.49,5.94]   Male       1       16</span></span>
<span><span class="co">#R&gt;  19  0.360445712 0.12578870    14 (5.49,5.94] Female       2       16</span></span>
<span><span class="co">#R&gt;  6   0.079842823 0.08412082    75 (5.94,6.38]   Male       1       17</span></span>
<span><span class="co">#R&gt;  20  0.374627236 0.16587570   122 (5.94,6.38] Female       2       17</span></span>
<span><span class="co">#R&gt;  7   0.044564502 0.07018037    52 (6.38,6.83]   Male       1       18</span></span>
<span><span class="co">#R&gt;  21  0.181507154 0.17042177    60 (6.38,6.83] Female       2       18</span></span>
<span><span class="co">#R&gt;  8   0.092504823 0.09786510    40 (6.83,7.28]   Male       1       19</span></span>
<span><span class="co">#R&gt;  22  0.060693337 0.10959871    41 (6.83,7.28] Female       2       19</span></span>
<span><span class="co">#R&gt;  9   0.118606867 0.07474656   199 (7.28,7.73]   Male       1       20</span></span>
<span><span class="co">#R&gt;  23 -0.018188397 0.09156537   224 (7.28,7.73] Female       2       20</span></span>
<span><span class="co">#R&gt;  10  0.153318459 0.06470795    66 (7.73,8.18]   Male       1       21</span></span>
<span><span class="co">#R&gt;  24 -0.101958526 0.09853462    41 (7.73,8.18] Female       2       21</span></span>
<span><span class="co">#R&gt;  11  1.127409589 0.52884328     1 (8.18,8.62]   Male       1       22</span></span>
<span><span class="co">#R&gt;  25 -0.149188653 0.11697734     4 (8.18,8.62] Female       2       22</span></span>
<span><span class="co">#R&gt;  12  0.185701362 0.10924600   232 (8.62,9.07]   Male       1       23</span></span>
<span><span class="co">#R&gt;  26 -0.264580918 0.06332204   199 (8.62,9.07] Female       2       23</span></span>
<span><span class="co">#R&gt;  13  0.158598831 0.11370185    26 (9.07,9.52]   Male       1       24</span></span>
<span><span class="co">#R&gt;  27 -0.312509229 0.08996247    19 (9.07,9.52] Female       2       24</span></span>
<span><span class="co">#R&gt;  14  0.109706255 0.11979666    18 (9.52,9.97]   Male       1       25</span></span>
<span><span class="co">#R&gt;  28 -0.209722396 0.13675872    15 (9.52,9.97] Female       2       25</span></span>
<span><span class="va">tym1b_gr_unemp_intervals_sex</span><span class="op">$</span><span class="va">plot.a</span></span></code></pre></div>
<p><img src="reference/figures/README-tym1b_gr_unemp_intervals_sex-1.png"><!-- --></p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># B</span></span>
<span><span class="va">tym1b_gr_unemp_intervals_sex</span><span class="op">$</span><span class="va">data.b</span></span>
<span><span class="co">#R&gt;            atet    atet.sd count          by   over overold bySorted</span></span>
<span><span class="co">#R&gt;  1   0.09845630 0.29009104    11 (3.24,3.95]   Male       1       11</span></span>
<span><span class="co">#R&gt;  15 -0.02347323 0.34713905     8 (3.24,3.95] Female       2       11</span></span>
<span><span class="co">#R&gt;  2  -0.13706871 0.21268651     7 (3.95,4.65]   Male       1       12</span></span>
<span><span class="co">#R&gt;  16  0.26154289 0.30764949    16 (3.95,4.65] Female       2       12</span></span>
<span><span class="co">#R&gt;  3   0.06068555 0.09061270    89 (4.65,5.35]   Male       1       13</span></span>
<span><span class="co">#R&gt;  17  0.30989459 0.18612139    97 (4.65,5.35] Female       2       13</span></span>
<span><span class="co">#R&gt;  4  -0.01585171 0.09758297    17 (5.35,6.05]   Male       1       14</span></span>
<span><span class="co">#R&gt;  18  0.39953943 0.12970211    23 (5.35,6.05] Female       2       14</span></span>
<span><span class="co">#R&gt;  5   0.06692878 0.08243578   121 (6.05,6.74]   Male       1       15</span></span>
<span><span class="co">#R&gt;  19  0.33834834 0.16800269   163 (6.05,6.74] Female       2       15</span></span>
<span><span class="co">#R&gt;  6   0.08070519 0.07104968    66 (6.74,7.44]   Male       1       16</span></span>
<span><span class="co">#R&gt;  20  0.09609942 0.13750439    79 (6.74,7.44] Female       2       16</span></span>
<span><span class="co">#R&gt;  7   0.12643909 0.06235957   355 (7.44,8.14]   Male       1       17</span></span>
<span><span class="co">#R&gt;  21 -0.04807191 0.08632123   373 (7.44,8.14] Female       2       17</span></span>
<span><span class="co">#R&gt;  8   0.13027289 0.05918020   147 (8.14,8.84]   Male       1       18</span></span>
<span><span class="co">#R&gt;  22 -0.15067024 0.07626737   177 (8.14,8.84] Female       2       18</span></span>
<span><span class="co">#R&gt;  9   0.18203493 0.10807305   309 (8.84,9.54]   Male       1       19</span></span>
<span><span class="co">#R&gt;  23 -0.28387972 0.06409469   270 (8.84,9.54] Female       2       19</span></span>
<span><span class="co">#R&gt;  10  0.16225485 0.11073266    70 (9.54,10.2]   Male       1       20</span></span>
<span><span class="co">#R&gt;  24 -0.23638766 0.08258878    63 (9.54,10.2] Female       2       20</span></span>
<span><span class="co">#R&gt;  11  0.22382345 0.17098897    78 (10.2,10.9]   Male       1       21</span></span>
<span><span class="co">#R&gt;  25 -0.17676651 0.15585161    73 (10.2,10.9] Female       2       21</span></span>
<span><span class="co">#R&gt;  12  0.02640660 0.39067359   281 (11.6,12.3]   Male       1       23</span></span>
<span><span class="co">#R&gt;  26 -0.40322606 0.28994584   269 (11.6,12.3] Female       2       23</span></span>
<span><span class="co">#R&gt;  13  0.09131853 0.46671305   248   (12.3,13]   Male       1       24</span></span>
<span><span class="co">#R&gt;  27 -0.45701099 0.36599901   234   (12.3,13] Female       2       24</span></span>
<span><span class="co">#R&gt;  14 -0.02684283 0.43524295    21   (13,13.7]   Male       1       25</span></span>
<span><span class="co">#R&gt;  28 -0.45991647 0.42790909    24   (13,13.7] Female       2       25</span></span>
<span><span class="va">tym1b_gr_unemp_intervals_sex</span><span class="op">$</span><span class="va">plot.b</span></span></code></pre></div>
<p><img src="reference/figures/README-tym1b_gr_unemp_intervals_sex-2.png"><!-- --></p>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ggsave(paste0("atet_ci_unemp_sex_intervals.pdf"), width = 15, height = 10, units = c("cm"))</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="scale-of-the-continuous-by-a-vector-1">Scale of the continuous ‘by’ a vector<a class="anchor" aria-label="anchor" href="#scale-of-the-continuous-by-a-vector-1"></a>
</h4>
<p><code>by.continuous.scale</code> is a vector. Note even if the user provides an interval wider than the range of the continuous ‘by’ variable <strong>didnpplot</strong> will take care of that and define the plausible range for plotting. In this example, <code>print.level = 2</code> option is used to show the working of the <strong>didnpplot</strong> command.</p>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tym1b_gr_unemp_breaks_sex</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/didnpplot.html">didnpplot</a></span><span class="op">(</span></span>
<span>  obj <span class="op">=</span> <span class="va">tym1b</span>,</span>
<span>  level <span class="op">=</span> <span class="fl">95</span>,</span>
<span>  by <span class="op">=</span> <span class="va">d0</span><span class="op">$</span><span class="va">unemp</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">esample</span><span class="op">]</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">sample1</span><span class="op">]</span>,</span>
<span>  by.continuous.scale <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">15</span>, <span class="fl">1</span><span class="op">)</span>, <span class="co">#c(2, 5, 7, 9, 12),</span></span>
<span>  over <span class="op">=</span> <span class="va">d0</span><span class="op">$</span><span class="va">sex</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">esample</span><span class="op">]</span><span class="op">[</span><span class="va">tym1b</span><span class="op">$</span><span class="va">sample1</span><span class="op">]</span>,</span>
<span>  xlab <span class="op">=</span> <span class="st">"Unemployment"</span>,</span>
<span>  ylab <span class="op">=</span> <span class="st">"ATET"</span>,</span>
<span>  over.labels.values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span>,<span class="st">"2"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Male"</span>, <span class="st">"Female"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  print.level <span class="op">=</span> <span class="fl">2</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#R&gt;  [1] "Female" "Male"  </span></span>
<span><span class="co">#R&gt;   over.over.levels:</span></span>
<span><span class="co">#R&gt;    over overnew overSorted</span></span>
<span><span class="co">#R&gt;  1    1    Male         11</span></span>
<span><span class="co">#R&gt;  2    2  Female         12</span></span>
<span><span class="co">#R&gt;  [1] "2. 'by' is continuous"</span></span>
<span><span class="co">#R&gt;  [1] "Scale of the continuous 'by' is determined by the vector in 'by.continuous.scale'"</span></span>
<span><span class="co">#R&gt;            by bySorted</span></span>
<span><span class="co">#R&gt;  1   [3.25,4]       11</span></span>
<span><span class="co">#R&gt;  2      (4,5]       12</span></span>
<span><span class="co">#R&gt;  3      (5,6]       13</span></span>
<span><span class="co">#R&gt;  4      (6,7]       14</span></span>
<span><span class="co">#R&gt;  5      (7,8]       15</span></span>
<span><span class="co">#R&gt;  6      (8,9]       16</span></span>
<span><span class="co">#R&gt;  7     (9,10]       17</span></span>
<span><span class="co">#R&gt;  8    (10,11]       18</span></span>
<span><span class="co">#R&gt;  9    (11,12]       19</span></span>
<span><span class="co">#R&gt;  10   (12,13]       20</span></span>
<span><span class="co">#R&gt;  11 (13,13.7]       21</span></span>
<span><span class="co">#R&gt;  [1] "2.1 TTa + TTb"</span></span>
<span><span class="co">#R&gt;  [1] "2.1.2 'by' + 'over'"</span></span>
<span><span class="co">#R&gt;  [1] "2.1.2.1 TTb"</span></span>
<span><span class="co">#R&gt;   d1b:</span></span>
<span><span class="co">#R&gt;            atet    atet.sd count        by   over overold bySorted</span></span>
<span><span class="co">#R&gt;  1   0.09845630 0.29009104    11  [3.25,4]   Male       1       11</span></span>
<span><span class="co">#R&gt;  12 -0.02347323 0.34713905     8  [3.25,4] Female       2       11</span></span>
<span><span class="co">#R&gt;  2   0.02885636 0.16476393    16     (4,5]   Male       1       12</span></span>
<span><span class="co">#R&gt;  13  0.30295388 0.25807817    27     (4,5] Female       2       12</span></span>
<span><span class="co">#R&gt;  3   0.03825105 0.08719675    97     (5,6]   Male       1       13</span></span>
<span><span class="co">#R&gt;  14  0.32343224 0.15615528   109     (5,6] Female       2       13</span></span>
<span><span class="co">#R&gt;  4   0.06577368 0.07688794   141     (6,7]   Male       1       14</span></span>
<span><span class="co">#R&gt;  15  0.31022067 0.16295369   191     (6,7] Female       2       14</span></span>
<span><span class="co">#R&gt;  5   0.12008788 0.07023518   304     (7,8]   Male       1       15</span></span>
<span><span class="co">#R&gt;  16 -0.00785910 0.09835051   328     (7,8] Female       2       15</span></span>
<span><span class="co">#R&gt;  6   0.12931165 0.05679626   245     (8,9]   Male       1       16</span></span>
<span><span class="co">#R&gt;  17 -0.14172913 0.07824188   276     (8,9] Female       2       16</span></span>
<span><span class="co">#R&gt;  7   0.18078503 0.10564027   361    (9,10]   Male       1       17</span></span>
<span><span class="co">#R&gt;  18 -0.27824320 0.06459184   320    (9,10] Female       2       17</span></span>
<span><span class="co">#R&gt;  8   0.20842337 0.16150640    95   (10,11]   Male       1       18</span></span>
<span><span class="co">#R&gt;  19 -0.17855446 0.15267125    83   (10,11] Female       2       18</span></span>
<span><span class="co">#R&gt;  9   0.02640660 0.39067359   281   (11,12]   Male       1       19</span></span>
<span><span class="co">#R&gt;  20 -0.40169183 0.28961304   267   (11,12] Female       2       19</span></span>
<span><span class="co">#R&gt;  10  0.09131853 0.46671305   248   (12,13]   Male       1       20</span></span>
<span><span class="co">#R&gt;  21 -0.45829093 0.36572819   236   (12,13] Female       2       20</span></span>
<span><span class="co">#R&gt;  11 -0.02684283 0.43524295    21 (13,13.7]   Male       1       21</span></span>
<span><span class="co">#R&gt;  22 -0.45991647 0.42790909    24 (13,13.7] Female       2       21</span></span>
<span><span class="co">#R&gt;   d1b2:</span></span>
<span><span class="co">#R&gt;            by bySorted</span></span>
<span><span class="co">#R&gt;  1   [3.25,4]       11</span></span>
<span><span class="co">#R&gt;  2      (4,5]       12</span></span>
<span><span class="co">#R&gt;  3      (5,6]       13</span></span>
<span><span class="co">#R&gt;  4      (6,7]       14</span></span>
<span><span class="co">#R&gt;  5      (7,8]       15</span></span>
<span><span class="co">#R&gt;  6      (8,9]       16</span></span>
<span><span class="co">#R&gt;  7     (9,10]       17</span></span>
<span><span class="co">#R&gt;  8    (10,11]       18</span></span>
<span><span class="co">#R&gt;  9    (11,12]       19</span></span>
<span><span class="co">#R&gt;  10   (12,13]       20</span></span>
<span><span class="co">#R&gt;  11 (13,13.7]       21</span></span>
<span><span class="co">#R&gt;  [1] "2.1.2.2 TTa"</span></span>
<span><span class="co">#R&gt;          by bySorted</span></span>
<span><span class="co">#R&gt;  1 [3.25,4]       11</span></span>
<span><span class="co">#R&gt;  2    (4,5]       12</span></span>
<span><span class="co">#R&gt;  3    (5,6]       13</span></span>
<span><span class="co">#R&gt;  4    (6,7]       14</span></span>
<span><span class="co">#R&gt;  5    (7,8]       15</span></span>
<span><span class="co">#R&gt;  6    (8,9]       16</span></span>
<span><span class="co">#R&gt;  7 (9,9.97]       17</span></span>
<span><span class="co">#R&gt;   d1a:</span></span>
<span><span class="co">#R&gt;            atet    atet.sd count       by   over overold bySorted</span></span>
<span><span class="co">#R&gt;  1   0.09845630 0.29009104    11 [3.25,4]   Male       1       11</span></span>
<span><span class="co">#R&gt;  8  -0.02347323 0.34713905     8 [3.25,4] Female       2       11</span></span>
<span><span class="co">#R&gt;  2   0.02885636 0.16476393    16    (4,5]   Male       1       12</span></span>
<span><span class="co">#R&gt;  9   0.34268424 0.24788406    26    (4,5] Female       2       12</span></span>
<span><span class="co">#R&gt;  3   0.03926202 0.08687729    96    (5,6]   Male       1       13</span></span>
<span><span class="co">#R&gt;  10  0.31110207 0.16458726   102    (5,6] Female       2       13</span></span>
<span><span class="co">#R&gt;  4   0.07019503 0.07621529   128    (6,7]   Male       1       14</span></span>
<span><span class="co">#R&gt;  11  0.30948335 0.16030149   186    (6,7] Female       2       14</span></span>
<span><span class="co">#R&gt;  5   0.12055339 0.07367913   283    (7,8]   Male       1       15</span></span>
<span><span class="co">#R&gt;  12 -0.01695304 0.09210929   287    (7,8] Female       2       15</span></span>
<span><span class="co">#R&gt;  6   0.20660049 0.05225349    22    (8,9]   Male       1       16</span></span>
<span><span class="co">#R&gt;  13 -0.15533690 0.07454707    19    (8,9] Female       2       16</span></span>
<span><span class="co">#R&gt;  7   0.17755214 0.10914644   274 (9,9.97]   Male       1       17</span></span>
<span><span class="co">#R&gt;  14 -0.26385061 0.06719624   232 (9,9.97] Female       2       17</span></span>
<span><span class="co">#R&gt;   d1a2:</span></span>
<span><span class="co">#R&gt;          by bySorted</span></span>
<span><span class="co">#R&gt;  1 [3.25,4]       11</span></span>
<span><span class="co">#R&gt;  2    (4,5]       12</span></span>
<span><span class="co">#R&gt;  3    (5,6]       13</span></span>
<span><span class="co">#R&gt;  4    (6,7]       14</span></span>
<span><span class="co">#R&gt;  5    (7,8]       15</span></span>
<span><span class="co">#R&gt;  6    (8,9]       16</span></span>
<span><span class="co">#R&gt;  7 (9,9.97]       17</span></span>
<span><span class="co"># A</span></span>
<span><span class="va">tym1b_gr_unemp_breaks_sex</span><span class="op">$</span><span class="va">data.a</span></span>
<span><span class="co">#R&gt;            atet    atet.sd count       by   over overold bySorted</span></span>
<span><span class="co">#R&gt;  1   0.09845630 0.29009104    11 [3.25,4]   Male       1       11</span></span>
<span><span class="co">#R&gt;  8  -0.02347323 0.34713905     8 [3.25,4] Female       2       11</span></span>
<span><span class="co">#R&gt;  2   0.02885636 0.16476393    16    (4,5]   Male       1       12</span></span>
<span><span class="co">#R&gt;  9   0.34268424 0.24788406    26    (4,5] Female       2       12</span></span>
<span><span class="co">#R&gt;  3   0.03926202 0.08687729    96    (5,6]   Male       1       13</span></span>
<span><span class="co">#R&gt;  10  0.31110207 0.16458726   102    (5,6] Female       2       13</span></span>
<span><span class="co">#R&gt;  4   0.07019503 0.07621529   128    (6,7]   Male       1       14</span></span>
<span><span class="co">#R&gt;  11  0.30948335 0.16030149   186    (6,7] Female       2       14</span></span>
<span><span class="co">#R&gt;  5   0.12055339 0.07367913   283    (7,8]   Male       1       15</span></span>
<span><span class="co">#R&gt;  12 -0.01695304 0.09210929   287    (7,8] Female       2       15</span></span>
<span><span class="co">#R&gt;  6   0.20660049 0.05225349    22    (8,9]   Male       1       16</span></span>
<span><span class="co">#R&gt;  13 -0.15533690 0.07454707    19    (8,9] Female       2       16</span></span>
<span><span class="co">#R&gt;  7   0.17755214 0.10914644   274 (9,9.97]   Male       1       17</span></span>
<span><span class="co">#R&gt;  14 -0.26385061 0.06719624   232 (9,9.97] Female       2       17</span></span>
<span><span class="va">tym1b_gr_unemp_breaks_sex</span><span class="op">$</span><span class="va">plot.a</span></span></code></pre></div>
<p><img src="reference/figures/README-tym1b_gr_unemp_breaks_sex-1.png"><!-- --></p>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># B</span></span>
<span><span class="va">tym1b_gr_unemp_breaks_sex</span><span class="op">$</span><span class="va">data.b</span></span>
<span><span class="co">#R&gt;            atet    atet.sd count        by   over overold bySorted</span></span>
<span><span class="co">#R&gt;  1   0.09845630 0.29009104    11  [3.25,4]   Male       1       11</span></span>
<span><span class="co">#R&gt;  12 -0.02347323 0.34713905     8  [3.25,4] Female       2       11</span></span>
<span><span class="co">#R&gt;  2   0.02885636 0.16476393    16     (4,5]   Male       1       12</span></span>
<span><span class="co">#R&gt;  13  0.30295388 0.25807817    27     (4,5] Female       2       12</span></span>
<span><span class="co">#R&gt;  3   0.03825105 0.08719675    97     (5,6]   Male       1       13</span></span>
<span><span class="co">#R&gt;  14  0.32343224 0.15615528   109     (5,6] Female       2       13</span></span>
<span><span class="co">#R&gt;  4   0.06577368 0.07688794   141     (6,7]   Male       1       14</span></span>
<span><span class="co">#R&gt;  15  0.31022067 0.16295369   191     (6,7] Female       2       14</span></span>
<span><span class="co">#R&gt;  5   0.12008788 0.07023518   304     (7,8]   Male       1       15</span></span>
<span><span class="co">#R&gt;  16 -0.00785910 0.09835051   328     (7,8] Female       2       15</span></span>
<span><span class="co">#R&gt;  6   0.12931165 0.05679626   245     (8,9]   Male       1       16</span></span>
<span><span class="co">#R&gt;  17 -0.14172913 0.07824188   276     (8,9] Female       2       16</span></span>
<span><span class="co">#R&gt;  7   0.18078503 0.10564027   361    (9,10]   Male       1       17</span></span>
<span><span class="co">#R&gt;  18 -0.27824320 0.06459184   320    (9,10] Female       2       17</span></span>
<span><span class="co">#R&gt;  8   0.20842337 0.16150640    95   (10,11]   Male       1       18</span></span>
<span><span class="co">#R&gt;  19 -0.17855446 0.15267125    83   (10,11] Female       2       18</span></span>
<span><span class="co">#R&gt;  9   0.02640660 0.39067359   281   (11,12]   Male       1       19</span></span>
<span><span class="co">#R&gt;  20 -0.40169183 0.28961304   267   (11,12] Female       2       19</span></span>
<span><span class="co">#R&gt;  10  0.09131853 0.46671305   248   (12,13]   Male       1       20</span></span>
<span><span class="co">#R&gt;  21 -0.45829093 0.36572819   236   (12,13] Female       2       20</span></span>
<span><span class="co">#R&gt;  11 -0.02684283 0.43524295    21 (13,13.7]   Male       1       21</span></span>
<span><span class="co">#R&gt;  22 -0.45991647 0.42790909    24 (13,13.7] Female       2       21</span></span>
<span><span class="va">tym1b_gr_unemp_breaks_sex</span><span class="op">$</span><span class="va">plot.b</span></span></code></pre></div>
<p><img src="reference/figures/README-tym1b_gr_unemp_breaks_sex-2.png"><!-- --></p>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ggsave(paste0("atet_ci_unemp_sex_breaks.pdf"), width = 15, height = 10, units = c("cm"))</span></span></code></pre></div>
</div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/OlegBadunenko/didnp" class="external-link">Source Code</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-2" class="external-link">GPL-2</a></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing didnp</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://OlegBadunenko.github.io/" class="external-link">Oleg Badunenko</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-7216-0861" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>
<a href="https://dhenderson.people.ua.edu/" class="external-link">Daniel J. Henderson</a> <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-4940-9689" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>
<a href="https://www.unige.ch/gsem/en/research/faculty/all/stefan-sperlich/" class="external-link">Stefan Sperlich</a> <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0001-5366-2612" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=npsf" class="external-link"><img src="http://cranlogs.r-pkg.org/badges/grand-total/npsf?color=blue"></a></li>
<li><a href="https://cran.r-project.org/package=npsf" class="external-link"><img src="http://cranlogs.r-pkg.org/badges/last-month/npsf?color=yellow"></a></li>
<li><a href="https://cran.r-project.org/package=npsf" class="external-link"><img src="https://www.r-pkg.org/badges/version/npsf?color=green"></a></li>
<li><a href="https://github.com/OlegBadunenko/didnp" class="external-link"><img src="https://img.shields.io/badge/devel%20version-1.0.0-red.svg"></a></li>
<li><a href="https://cran.r-project.org/web/checks/check_results_npsf.html" class="external-link"><img src="https://badges.cranchecks.info/summary/npsf.svg" alt="CRAN checks"></a></li>
<li><a href="https://github.com/OlegBadunenko/didnp/commits/main" class="external-link"><img src="https://img.shields.io/github/last-commit/OlegBadunenko/didnp.svg"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://OlegBadunenko.github.io/" class="external-link">Oleg Badunenko</a>, <a href="https://dhenderson.people.ua.edu/" class="external-link">Daniel J. Henderson</a>, <a href="https://www.unige.ch/gsem/en/research/faculty/all/stefan-sperlich/" class="external-link">Stefan Sperlich</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
